<div class="bbn-table bbn-full-screen k-grid">
  <div class="bbn-w-100 bbn-scroller" v-bbn-fill-height ref="xScroller">
    <div class="k-header bbn-table-head bbn-block">
      <table class="k-grid">
        <colgroup>
          <col v-for="(col, i) in cols"
               :style="headStyles(col)"
               :key="i"
          >
        </colgroup>
        <tbody>
        <tr>
          <td v-for="(col, i) in cols"
              class="bbn-c"
          >
            <span v-html="col.title" :title="col.fullTitle || col.title"></span>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
    <div class="bbn-table-main" v-bbn-fill-height ref="yScroller" @wheel="scroll">
      <h3 v-if="isLoading"
          class="bbn-lpadded"
          v-html="_('Loading...')"
      ></h3>
      <table class="k-grid" v-else-if="currentData.length">
        <colgroup>
          <col v-for="(col, i) in cols"
               :style="headStyles(col)"
               :key="i"
          >
        </colgroup>
        <tbody>
        <component v-if="component"
                   v-for="(d, i) in currentData"
                   :key="i"
                   :is="component"
                   :source="d"
        ></component>
        <tr v-if="!component"
            v-for="(d, i) in currentData"
            :key="i"
            :class="trClass ? trClass(d) : ''"
        >
          <td v-for="(col, j) in cols"
              :style="bodyStyles(col)"
          >
            <component v-if="col.component" :source="d"></component>
            <div v-else-if="col.buttons">
              <bbn-button v-for="(button, j) in col.buttons"
                          :key="j"
                          :url="button.url"
                          :text="button.text"
                          :title="button.title"
                          :icon="button.icon"
                          :notext="button.notext"
                          @click="button.command ? button.command(d, col, i) : false"
              ></bbn-button>
            </div>
            <div v-else v-html="render(d, col, i)"></div>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
  <div class="scrollbar-x" ref="xScrollbarContainer" v-show="xScrollNumber > 1.05">
    <div class="scrollbar" ref="xScrollbar"></div>
  </div>
  <div class="scrollbar-y" ref="yScrollbarContainer" v-show="yScrollNumber > 1.05">
    <div class="scrollbar" ref="yScrollbar"></div>
  </div>
  <!-- Footer -->
  <div class="k-pager-wrap k-grid-pager k-widget k-floatwrap">
    <div class="bbn-iblock" v-if="pagination">
      <bbn-button icon="fa fa-angle-double-left"
                  :notext="true"
                  aria-label="Aller à la première page"
                  title="Aller à la première page"
                  :disabled="isLoading || (currentPage == 1)"
                  @click="currentPage = 1"
      ></bbn-button>
      <bbn-button icon="fa fa-angle-left"
                  :notext="true"
                  aria-label="Aller à la page précédente"
                  title="Aller à la page précédente"
                  :disabled="isLoading || (currentPage == 1)"
                  @click="currentPage--"
      ></bbn-button>
      Page
      <bbn-numeric v-if="currentData.length"
                   v-model="currentPage"
                   :min="1"
                   :max="numPages"
                   style="width: 6em"
                   :disabled="isLoading"
      ></bbn-numeric>
      de {{numPages}}
      <bbn-button icon="fa fa-angle-right"
                  :notext="true"
                  aria-label="Aller à la page suivante"
                  title="Aller à la page suivante"
                  :disabled="isLoading || (currentPage == numPages)"
                  @click="currentPage++"
      ></bbn-button>
      <bbn-button icon="fa fa-angle-double-right"
                  :notext="true"
                  aria-label="Aller à la dernière page"
                  title="Aller à la dernière page"
                  @click="currentPage = numPages"
                  :disabled="isLoading || (currentPage == numPages)"
      ></bbn-button>
    </div>
    <span class="k-pager-sizes k-label">
      <bbn-dropdown :source="limits" v-model="currentLimit" @change="currentPage = 1"></bbn-dropdown>
      <span>articles par page</span>
    </span>
    <a href="javascript:"
       v-if="isAjax"
       class="k-pager-refresh k-link"
       title="Actualiser"
       @click="updateData()"
    >
      <span class="k-icon k-i-reload"></span>
    </a>
    <span class="k-pager-info k-label">
      Afficher les items {{start+1}} - {{start ? start + currentLimit : currentLimit}} de {{total}}
    </span>
  </div>
  
</div>