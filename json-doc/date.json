{
    "doc": {
        "description": "Deals with date manipulation.",
        "tags": {
            "copyright": "BBN Solutions",
            "since": "Apr 4, 2011, 23:23:55 +0000",
            "category": "Time and Date",
            "license": "http:\/\/www.opensource.org\/licenses\/mit-license.php MIT",
            "version": "0.2r89",
            "todo": "Plenty of stuff!"
        }
    },
    "name": "bbn\\date",
    "namespace": true,
    "traits": [],
    "interfaces": [],
    "fileName": "\/home\/thomas\/domains\/apstapp.thomas.lan\/_appui\/vendor\/bbn\/bbn\/src\/bbn\/date.php",
    "startLine": 18,
    "endLine": 176,
    "contentConstructor": null,
    "methods": {
        "is_windows": {
            "name": "is_windows",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n      self::$windows = x::is_windows();\n    }\n    return self::$windows;\n  }",
            "startLine": 22,
            "endLine": 27,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": []
        },
        "last_day_of_month": {
            "name": "last_day_of_month",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($date, $format = false)\n  {\n      $m = false;\n      if ( str::is_number($date) ){\n        if ( $date <= 12 ){\n          $m = $date;\n          $y = date('Y');\n        }\n        else{\n          $m = (int)date('m', $date);\n          $y = date('Y', $date);\n        }\n      }\n      else if ( $d = strtotime($date) ){\n        $m = (int)date('m', $d);\n        $y = date('Y', $d);\n      }\n      if ( $m ){\n        $r = mktime(0, 0, -1, $m+1, 1, $y);\n        return $format ? date($format, $r) : $r;\n      }\n    }\n    \n  }",
            "startLine": 29,
            "endLine": 52,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "date",
                    "position": 0,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "format",
                    "position": 1,
                    "type": null,
                    "required": false,
                    "has_default": true,
                    "default": false,
                    "default_name": ""
                }
            ]
        },
        "validate": {
            "name": "validate",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($date, $format = 'Y-m-d H:i:s')\n  {\n    return $d && $d->format($format) == $date;\n  }",
            "startLine": 54,
            "endLine": 57,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "date",
                    "position": 0,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "format",
                    "position": 1,
                    "type": null,
                    "required": false,
                    "has_default": true,
                    "default": "Y-m-d H:i:s",
                    "default_name": ""
                }
            ]
        },
        "validateSQL": {
            "name": "validateSQL",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($date)\n  {\n  }",
            "startLine": 59,
            "endLine": 61,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "date",
                    "position": 0,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "format": {
            "name": "format",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($date = '', $mode = '')\n  {\n\t\t\/* Formatting: idate is the timestamp, and date[0] and date[1] the SQL date and time *\/\n\t\tif ( empty($date) ){\n\t\t\t$idate = time();\n    }\n\t\telse if ( is_numeric($date) ){\n\t\t\t$idate = $date;\n    }\n\t\telse{\n\t\t\t$idate = strtotime($date);\n    }\n\t\t$is_windows = strtoupper(substr(PHP_OS, 0, 3)) == 'WIN' ? true : false;\n\t\tif ( $idate )\n\t\t{\n\t\t\t\/* Getting the time difference *\/\n\t\t\t$t = time();\n      \/\/if ( ($date('h') == 0) && ($date('i') == 0) && ($date('s', $ida) == 0) ){\n\t\t\t$h = localtime($idate, 1);\n\t\t\t$start_today = mktime(0, 0, 0);\n\t\t\t$end_today = $start_today + ( 24 * 3600 );\n\t\t\t$is_today = ( ($idate >= $start_today) && ($idate < $end_today) ) ? 1 : false;\n\t\t\t$only_date = ($mode === 'date') || ( $h['tm_hour'] + $h['tm_min'] + $h['tm_sec'] == 0 ) ? 1 : false;\n\t\t\tif ( $mode === 'idate' ){\n        $date_ok = $idate;\n      }\n\t\t\telse if ( $mode === 'dbdate' ){\n        $date_ok = date('Y-m-d H:i:s', $idate);\n      }\n      else if ( $mode === 'm' ){\n        $date_ok = $is_windows ? strftime(\"%m\", $idate) : strftime(\"%B\", $idate);\n      }\n      else if ( $mode === 'my' ){\n        $date_ok = $is_windows ? strftime(\"%m %Y\", $idate) : strftime(\"%B %Y\", $idate);\n      }\n\t\t\telse if ( $mode === 'wsdate' || $mode === 's' ){\n\t\t\t\tif ( $is_today && !$only_date ){\n          $date_ok = strftime('%H:%M', $idate);\n        }\n\t\t\t\telse{\n          $date_ok = $is_windows ? strftime('%d\/%m\/%y', $idate) : strftime('%x', $idate);\n        }\n\t\t\t}\n\t\t\telse if ( $mode == 'r' ){\n\t\t\t\tif ( $is_today && !$only_date ){\n          $date_ok = strftime('%R', $idate);\n        }\n\t\t\t\telse{\n          $date_ok = $is_windows ? utf8_encode(strftime('%#d %b %Y', $idate)) : strftime('%e %b %Y', $idate);\n        }\n\t\t\t}\n\t\t\telse if ( $mode == 'js' ){\n        $date_ok = date('D M d Y H:i:s O', $idate);\n\t\t\t}\n      else if ( ($mode === 'wdate') || ($mode === 'wdate') ){\n        $date_ok = $is_windows ? utf8_encode(strftime('%A %#d %B %Y', $idate)) : strftime('%A %e %B %Y', $idate);\n        if ( !$only_date && ($mode !== 'notime') ){\n          $date_ok .= ', '.strftime('%H:%M', $idate);\n        }\n      }\n      else {\n        $date_ok = $is_windows ? utf8_encode(strftime('%#d %B %Y', $idate)) : strftime('%e %B %Y', $idate);\n        if ( !$only_date && ($mode !== 'notime') ){\n          $date_ok .= ', '.strftime('%H:%M', $idate);\n        }\n      }\n\t\t\treturn $date_ok;\n\t\t}\n  }",
            "startLine": 68,
            "endLine": 136,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "date",
                    "position": 0,
                    "type": null,
                    "required": false,
                    "has_default": true,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "mode",
                    "position": 1,
                    "type": null,
                    "required": false,
                    "has_default": true,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "monthpicker_options": {
            "name": "monthpicker_options",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($val = '')\n  {\n    $arr = [];\n    for ( $i = 1; $i <= 12; $i++ ){\n      $arr[$i] = self::month_name($i);\n    }\n    return x::build_options($arr, $val);\n  }",
            "startLine": 138,
            "endLine": 145,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "val",
                    "position": 0,
                    "type": null,
                    "required": false,
                    "has_default": true,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "month_name": {
            "name": "month_name",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($m)\n  {\n  }",
            "startLine": 147,
            "endLine": 149,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "m",
                    "position": 0,
                    "type": null,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "get_month_week": {
            "name": "get_month_week",
            "summary": "Gets the month's week of the given date.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\date",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function($date, $firstweekday = 'monday')\n  {\n    $cut = substr($date, 0, 8);\n    $daylen = 86400;\n    $timestamp = strtotime($date);\n    $first = strtotime($cut . \"00\");\n    $elapsed = ($timestamp - $first) \/ $daylen;\n    $weeks = 1;\n    for ( $i = 1; $i <= $elapsed; $i++ ){\n      $dayfind = $cut . (strlen($i) < 2 ? '0' . $i : $i);\n      $daytimestamp = strtotime($dayfind);\n      $day = strtolower(date(\"l\", $daytimestamp));\n      if ( $day === strtolower($firstweekday) ){\n        $weeks++;\n      }\n    }\n    return $weeks;\n  }",
            "startLine": 157,
            "endLine": 174,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": [
                "int"
            ],
            "parent": false,
            "arguments": [
                {
                    "name": "date",
                    "position": 0,
                    "type": "string",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "firstweekday",
                    "position": 1,
                    "type": "string",
                    "required": false,
                    "has_default": true,
                    "default": "monday",
                    "default_name": ""
                }
            ]
        }
    },
    "properties": null,
    "staticProperties": {
        "windows": null
    },
    "constants": null,
    "numMethods": 8,
    "numProperties": 0,
    "numConstants": 0,
    "numStaticProperties": 1,
    "interfaceNames": [],
    "isInterface": false,
    "traitNames": [],
    "traitAliases": [],
    "isTrait": false,
    "isAbstract": false,
    "isFinal": false,
    "modifiers": 0,
    "parentClass": null,
    "isSubclassOf": false,
    "defaultProperties": {
        "windows": null
    },
    "isIterable": false,
    "extensionName": false,
    "namespaceName": "bbn",
    "shortName": "date",
    "summary": "Deals with date manipulation."
}