{
    "doc": {
        "description": "",
        "tags": []
    },
    "name": "bbn\\Appui\\Option\\Internal\\Plugin",
    "namespace": true,
    "realName": "Plugin",
    "realNamespace": "bbn\\Appui\\Option\\Internal",
    "traits": [],
    "interfaces": [],
    "fileName": "\/Appui\/Option\/Internal\/Plugin.php",
    "startLine": 8,
    "endLine": 322,
    "numMethods": 10,
    "numProperties": 0,
    "numConstants": 0,
    "numStaticProperties": 0,
    "interfaceNames": [],
    "isInterface": false,
    "traitAliases": [],
    "isTrait": true,
    "isAbstract": false,
    "isFinal": false,
    "modifiers": 0,
    "parentClass": null,
    "isSubclassOf": false,
    "defaultProperties": [],
    "isIterable": false,
    "extensionName": false,
    "namespaceName": "bbn\\Appui\\Option\\Internal",
    "shortName": "Plugin",
    "contentConstructor": null,
    "methods": {
        "updatePlugins": {
            "name": "updatePlugins",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function updatePlugins(): ?int\n  {\n    if (($pluginAlias = $this->getPluginTemplateId())\n      && ($export = $this->export($pluginAlias, 'sfull'))\n    ) {\n      $res = 0;\n      \/*\n      $codePath = $this->getCodePath($pluginAlias);\n      $items = X::map(function($a) use ($pluginAlias) {\n        $a['id_alias'] = $pluginAlias;\n        return $a;\n      }, $export['items'], 'items');\n      $idPlugins = $this->getAliasItems($pluginAlias);\n      foreach ($idPlugins as $idPlugin) {\n        foreach ($this->import($items, $idPlugin) as $num) {\n          $res += $num;\n        }\n      }\n      *\/\n\n      return $res;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 13,
            "endLine": 37,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "shortName": "updatePlugins",
            "returns": [
                null,
                "int"
            ],
            "arguments": [],
            "doc": {
                "description": "",
                "params": [],
                "return": ""
            },
            "comments": "  \/**\n   * @return int|null\n   *\/"
        },
        "getParentSubplugin": {
            "name": "getParentSubplugin",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getParentSubplugin(...$codes): ?string\n  {\n    if ($id = $this->fromCode(...$codes)) {\n      return ($r = $this->getClosest($id, 'subplugin')) ? $r['id'] : null;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 43,
            "endLine": 50,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": true,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "shortName": "getParentSubplugin",
            "returns": [
                null,
                "string"
            ],
            "arguments": [
                {
                    "name": "codes",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": true,
                    "reference": false,
                    "required": false,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ],
            "doc": {
                "description": "",
                "params": [],
                "return": ""
            },
            "comments": "  \/**\n   * @return string|null\n   *\/"
        },
        "getParentPlugin": {
            "name": "getParentPlugin",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getParentPlugin(...$codes): ?string\n  {\n    if ($id = $this->fromCode(...$codes)) {\n      return ($r = $this->getClosest($id, 'plugin')) ? $r['id'] : null;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 56,
            "endLine": 63,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": true,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "shortName": "getParentPlugin",
            "returns": [
                null,
                "string"
            ],
            "arguments": [
                {
                    "name": "codes",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": true,
                    "reference": false,
                    "required": false,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ],
            "doc": {
                "description": "",
                "params": [],
                "return": ""
            },
            "comments": "  \/**\n   * @return string|null\n   *\/"
        },
        "getParentApp": {
            "name": "getParentApp",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getParentApp(...$codes): ?string\n  {\n    if ($id = $this->fromCode(...$codes)) {\n      return ($r = $this->getClosest($id, 'app')) ? $r['id'] : null;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 69,
            "endLine": 76,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": true,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 0,
            "shortName": "getParentApp",
            "returns": [
                null,
                "string"
            ],
            "arguments": [
                {
                    "name": "codes",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": true,
                    "reference": false,
                    "required": false,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ],
            "doc": {
                "description": "",
                "params": [],
                "return": ""
            },
            "comments": "  \/**\n   * @return string|null\n   *\/"
        },
        "getClosest": {
            "name": "getClosest",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getClosest($id, $type): ?array\n  {\n    $subpluginAlias = $this->getSubpluginTemplateId();\n    $pluginAlias = $this->getPluginTemplateId();\n\n    if ($subpluginAlias && $pluginAlias) {\n      $ids = $this->parents($id);\n      $num = count($ids);\n      foreach ($ids as $i => $id) {\n        if ($this->getIdAlias($id) === $subpluginAlias) {\n          if (!$type || ($type === 'subplugin')) {\n            return ['type' => 'subplugin', 'id' => $id];\n          }\n        }\n        elseif ($this->getIdAlias($id) === $pluginAlias) {\n          if ($num < 3) {\n            if (!$type || ($type === 'app')) {\n              return ['type' => 'app', 'id' => $id];\n            }\n\n            break;\n          }\n          else {\n            if (!$type || ($type === 'plugin')) {\n              return ['type' => 'plugin', 'id' => $id];\n            }\n          }\n        }\n\n        $num--;\n      }\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 79,
            "endLine": 113,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 2,
            "shortName": "getClosest",
            "returns": [
                null,
                "array"
            ],
            "arguments": [
                {
                    "name": "id",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": false,
                    "reference": false,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "type",
                    "position": 1,
                    "type": "",
                    "type_arr": [],
                    "variadic": false,
                    "reference": false,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "getPluginName": {
            "name": "getPluginName",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getPluginName($id): ?string\n  {\n    $pluginAlias = $this->getPluginTemplateId();\n    $pluginsAlias = $this->getPluginsTemplateId();\n    $o = $this->option($id);\n    if ($pluginAlias && ($o['id_alias'] === $pluginAlias)) {\n      $st = '';\n      while ($o && ($o['id_alias'] !== $pluginsAlias)) {\n        $code = $o['code'] ?: $o['alias']['code'];\n        $st = $code . ($st ? '-' . $st : '');\n        $o = $o['id_parent'] !== $o['id'] ? $this->option($o['id_parent']) : null;\n      }\n\n      return $st;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 116,
            "endLine": 133,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "shortName": "getPluginName",
            "returns": [
                null,
                "string"
            ],
            "arguments": [
                {
                    "name": "id",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": false,
                    "reference": false,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "getSubpluginName": {
            "name": "getSubpluginName",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getSubpluginName($id): ?string\n  {\n    $subpluginAlias = $this->getSubpluginTemplateId();\n    $pluginsAlias = $this->getPluginsTemplateId();\n    $o = $this->option($id);\n    $code = $o['code'] ?: $o['alias']['code'];\n    if ($subpluginAlias && ($o['id_alias'] === $subpluginAlias)) {\n      $st = '';\n      while ($o && ($o['id_alias'] !== $pluginsAlias)) {\n        $st = $code . ($st ? '-' . $st : '');\n        $o = $o['id_parent'] !== $o['id'] ? $this->option($o['id_parent']) : null;\n      }\n\n      return $st;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 135,
            "endLine": 152,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "shortName": "getSubpluginName",
            "returns": [
                null,
                "string"
            ],
            "arguments": [
                {
                    "name": "id",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": false,
                    "reference": false,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "isPlugin": {
            "name": "isPlugin",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function isPlugin($id): bool\n  {\n    if ($this->alias($id) === $this->getPluginTemplateId()) {\n      return true;\n    }\n\n    return false;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 154,
            "endLine": 161,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "shortName": "isPlugin",
            "returns": [
                "bool"
            ],
            "arguments": [
                {
                    "name": "id",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": false,
                    "reference": false,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "getPlugins": {
            "name": "getPlugins",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getPlugins($root = null, bool $full = false, bool $withSubs = false): ?array\n  {\n    $pluginAlias = $this->getPluginTemplateId();\n    $pluginsAlias = $this->getPluginsTemplateId();\n    $plugins = $this->fromCode('plugins', $root ?: $this->getDefault());\n    $res = [];\n    if ($pluginAlias && $pluginsAlias && $plugins) {\n      foreach ($this->fullOptions($plugins) as $p) {\n        $originalId = $p['id'];\n        $code = $p['code'];\n        $pluginId = null;\n        if ($p['id_alias'] === $pluginAlias) {\n          $pluginId = $p['id'];\n          $pluginText = $p['text'];\n          $pluginIcon = $p['icon'] ?? '';\n        }\n        elseif (!$p['text'] && !empty($p['alias']) && ($p['alias']['id_alias'] === $pluginAlias)) {\n          $pluginId = $p['id_alias'];\n          $pluginText = $p['alias']['text'];\n          $pluginIcon = $p['alias']['icon'];\n          $code = $p['alias']['code'] ?? '';\n        }\n\n        if ($pluginId) {\n          if (empty($code)) {\n            throw new Exception(X::_(\"The plugin option must have a code\"));\n          }\n\n          $item = [\n            'id' => $originalId,\n            'code' => $code,\n            'text' => $pluginText,\n            'icon' => $pluginIcon,\n          ];\n          if ($full) {\n            $item = array_merge($item, [\n              'rootPlugins' => $this->fromCode('plugins', $pluginId),\n              'rootOptions' => $this->fromCode('options', $pluginId),\n              'rootTemplates' => $this->fromCode('templates', $pluginId),\n              'rootPermissions' => $this->fromCode('permissions', $pluginId)\n            ]);\n          }\n\n          if ($withSubs) {\n            $item['subplugins'] = $this->getSubplugins($pluginId);\n          }\n\n          $res[] = $item;\n        }\n        else {\n          if (empty($code) && !empty($p['alias']['code'])) {\n            $code = $p['alias']['code'];\n          }\n          if (empty($code)) {\n            throw new Exception(X::_(\"The plugin alias option must have a code\"));\n          }\n          \n          foreach ($this->fullOptions($p['id']) as $p2) {\n            $code2 = $p2['code'];\n            $pluginId = null;\n            if ($p2['id_alias'] === $pluginAlias) {\n              $pluginId = $p2['id'];\n              $pluginText = $p2['text'];\n              $pluginIcon = $p2['icon'] ?? '';\n            }\n            elseif (!$p2['text'] && !empty($p2['alias']) && ($p2['alias']['id_alias'] === $pluginAlias)) {\n              $pluginId = $p2['id_alias'];\n              $pluginText = $p2['alias']['text'];\n              $pluginIcon = $p2['alias']['icon'];\n              $code2 = $p2['alias']['code'] ?? '';\n            }\n    \n            if ($pluginId) {\n              if (empty($code2)) {\n                throw new Exception(X::_(\"The plugin option must have a code\"));\n              }\n    \n              $item = [\n                'id' => $p2['id'],\n                'code' => $code . '-' . $code2,\n                'text' => $pluginText,\n                'icon' => $pluginIcon,\n              ];\n              if ($full) {\n                $item = array_merge($item, [\n                  'rootPlugins' => $this->fromCode('plugins', $pluginId),\n                  'rootOptions' => $this->fromCode('options', $pluginId),\n                  'rootTemplates' => $this->fromCode('templates', $pluginId),\n                  'rootPermissions' => $this->fromCode('permissions', $pluginId)\n                ]);\n              }\n    \n              if ($withSubs) {\n                $item['subplugins'] = $this->getSubplugins($pluginId);\n              }\n    \n              $res[] = $item;\n            }\n          }\n        }\n      }\n\n      return $res;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 164,
            "endLine": 270,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 3,
            "numberOfRequiredParameters": 0,
            "shortName": "getPlugins",
            "returns": [
                null,
                "array"
            ],
            "arguments": [
                {
                    "name": "root",
                    "position": 0,
                    "type": "",
                    "type_arr": [],
                    "variadic": false,
                    "reference": false,
                    "required": false,
                    "has_default": true,
                    "default": null,
                    "default_name": ""
                },
                {
                    "name": "full",
                    "position": 1,
                    "type": "bool",
                    "type_arr": [
                        "bool"
                    ],
                    "variadic": false,
                    "reference": false,
                    "required": false,
                    "has_default": true,
                    "default": false,
                    "default_name": ""
                },
                {
                    "name": "withSubs",
                    "position": 2,
                    "type": "bool",
                    "type_arr": [
                        "bool"
                    ],
                    "variadic": false,
                    "reference": false,
                    "required": false,
                    "has_default": true,
                    "default": false,
                    "default_name": ""
                }
            ]
        },
        "getSubplugins": {
            "name": "getSubplugins",
            "summary": "",
            "description": "",
            "description_parts": [],
            "class": "bbn\\Appui\\Option\\Internal\\Plugin",
            "filename": "\/home\/nabab\/web\/_COMPOSER\/dev\/vendor\/bbn\/bbn\/src\/bbn\/Appui\/Option\/Internal\/Plugin.php",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "  public function getSubplugins(string $id_plugin): ?array\n  {\n    $subpluginAlias = $this->getSubpluginTemplateId();\n    $pluginAlias = $this->getPluginTemplateId();\n    $pluginsAlias = $this->getPluginsTemplateId();\n    $plugins = $this->fromCode('plugins', $id_plugin);\n    $res = [];\n    if ($pluginAlias && $pluginsAlias && $plugins) {\n      foreach ($this->fullOptions($plugins) as $p) {\n        $code = $p['code'] ?: $p['alias']['code'];\n        if (empty($code)) {\n          throw new Exception(X::_(\"The plugin option must have a code\"));\n        }\n\n        if ($p['id_alias'] === $subpluginAlias) {\n          $res[] = [\n            'id' => $p['id'],\n            'code' => $code,\n            'text' => $p['text'],\n            'icon' => $p['icon'] ?? '',\n            'rootOptions' => $this->fromCode('options', $p['id']),\n            'rootPermissions' => $this->fromCode('permissions', $p['id'])\n          ];\n        } else {\n          foreach ($this->fullOptions($p['id']) as $p2) {\n            $code2 = $p2['code'] ?: $p2['alias']['code'];\n            if (empty($code2)) {\n              throw new Exception(X::_(\"The plugin option must have a code\"));\n            }\n\n            if ($p2['id_alias'] === $subpluginAlias) {\n              $res[] = [\n                'id' => $p2['id'],\n                'code' => \"$code-$code2\",\n                'text' => $p2['text'] ?: \"$code-$code2\",\n                'icon' => $p2['icon'] ?? '',\n                'rootOptions' => $this->fromCode('options', $p2['id']),\n                'rootPermissions' => $this->fromCode('permissions', $p2['id'])\n              ];\n            }\n          }\n        }\n      }\n\n      return $res;\n    }\n\n    return null;\n  }",
            "parent": false,
            "trait": false,
            "startLine": 273,
            "endLine": 321,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "shortName": "getSubplugins",
            "returns": [
                null,
                "array"
            ],
            "arguments": [
                {
                    "name": "id_plugin",
                    "position": 0,
                    "type": "string",
                    "type_arr": [
                        "string"
                    ],
                    "variadic": false,
                    "reference": false,
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        }
    },
    "properties": null,
    "staticProperties": [],
    "constants": null,
    "uses": {
        "Exception": "Exception",
        "bbn\\X": "X"
    },
    "dummyComments": [
        "\/**\n   * @return int|null\n   *\/",
        "\/**\n   * @return string|null\n   *\/",
        "\/**\n   * @return string|null\n   *\/",
        "\/**\n   * @return string|null\n   *\/"
    ],
    "summary": "",
    "description": "",
    "description_parts": []
}