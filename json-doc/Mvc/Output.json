{
    "doc": {
        "description": "",
        "tags": []
    },
    "name": "bbn\\Mvc\\Output",
    "namespace": true,
    "traits": [],
    "interfaces": [],
    "fileName": "\/Mvc\/Output.php",
    "startLine": 13,
    "endLine": 270,
    "numMethods": 11,
    "numProperties": 0,
    "numConstants": 0,
    "numStaticProperties": 0,
    "interfaceNames": [],
    "isInterface": false,
    "traitNames": [],
    "traitAliases": [],
    "isTrait": false,
    "isAbstract": false,
    "isFinal": false,
    "modifiers": 0,
    "parentClass": "bbn\\Models\\Cls\\Basic",
    "isSubclassOf": false,
    "defaultProperties": {
        "errors": [],
        "error": false,
        "debug": false,
        "log": []
    },
    "isIterable": false,
    "extensionName": false,
    "namespaceName": "bbn\\Mvc",
    "shortName": "Output",
    "contentConstructor": {
        "file": "bbn\\Mvc\\Output",
        "returns": null
    },
    "methods": {
        "statusHeader": {
            "name": "statusHeader",
            "summary": "Returns an array with the status and the code for the given code, and sends the corresponding header if not disabled",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Mvc\\Output",
            "static": true,
            "visibility": "public",
            "final": false,
            "code": "function(int $code, bool $send = true)\n  {\n    $http = [\n      100 => 'HTTP\/1.1 100 Continue',\n      101 => 'HTTP\/1.1 101 Switching Protocols',\n      200 => 'HTTP\/1.1 200 OK',\n      201 => 'HTTP\/1.1 201 Created',\n      202 => 'HTTP\/1.1 202 Accepted',\n      203 => 'HTTP\/1.1 203 Non-Authoritative Information',\n      204 => 'HTTP\/1.1 204 No Content',\n      205 => 'HTTP\/1.1 205 Reset Content',\n      206 => 'HTTP\/1.1 206 Partial Content',\n      300 => 'HTTP\/1.1 300 Multiple Choices',\n      301 => 'HTTP\/1.1 301 Moved Permanently',\n      302 => 'HTTP\/1.1 302 Found',\n      303 => 'HTTP\/1.1 303 See Other',\n      304 => 'HTTP\/1.1 304 Not Modified',\n      305 => 'HTTP\/1.1 305 Use Proxy',\n      307 => 'HTTP\/1.1 307 Temporary Redirect',\n      400 => 'HTTP\/1.1 400 Bad Request',\n      401 => 'HTTP\/1.1 401 Unauthorized',\n      402 => 'HTTP\/1.1 402 Payment Required',\n      403 => 'HTTP\/1.1 403 Forbidden',\n      404 => 'HTTP\/1.1 404 Not Found',\n      405 => 'HTTP\/1.1 405 Method Not Allowed',\n      406 => 'HTTP\/1.1 406 Not Acceptable',\n      407 => 'HTTP\/1.1 407 Proxy Authentication Required',\n      408 => 'HTTP\/1.1 408 Request Time-out',\n      409 => 'HTTP\/1.1 409 Conflict',\n      410 => 'HTTP\/1.1 410 Gone',\n      411 => 'HTTP\/1.1 411 Length Required',\n      412 => 'HTTP\/1.1 412 Precondition Failed',\n      413 => 'HTTP\/1.1 413 Request Entity Too Large',\n      414 => 'HTTP\/1.1 414 Request-URI Too Large',\n      415 => 'HTTP\/1.1 415 Unsupported Media Type',\n      416 => 'HTTP\/1.1 416 Requested Range Not Satisfiable',\n      417 => 'HTTP\/1.1 417 Expectation Failed',\n      500 => 'HTTP\/1.1 500 Internal Server Error',\n      501 => 'HTTP\/1.1 501 Not Implemented',\n      502 => 'HTTP\/1.1 502 Bad Gateway',\n      503 => 'HTTP\/1.1 503 Service Unavailable',\n      504 => 'HTTP\/1.1 504 Gateway Time-out',\n      505 => 'HTTP\/1.1 505 HTTP Version Not Supported',\n    ];\n\n    if (!isset($http[$code])) {\n      throw new \\Exception(\"The given status doesn't exist\");\n    }\n\n    if ($send) {\n      header($http[$code]);\n      if ($code !== 200) {\n        exit();\n      }\n    }\n \n    return [\n      'code' => $code,\n      'error' => $http[$code],\n    ];\n  }",
            "startLine": 22,
            "endLine": 82,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "code",
                    "position": 0,
                    "type": "int",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": "",
                    "description": "The status code"
                },
                {
                    "name": "send",
                    "position": 1,
                    "type": "bool",
                    "required": false,
                    "has_default": true,
                    "default": true,
                    "default_name": "",
                    "description": "If false the header won't be sent"
                }
            ]
        },
        "__construct": {
            "name": "__construct",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Mvc\\Output",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function(stdClass $obj, $mode)\n  {\n    $this->mode = $mode;\n  }",
            "startLine": 85,
            "endLine": 88,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 2,
            "returns": null,
            "parent": false,
            "arguments": [
                {
                    "name": "obj",
                    "position": 0,
                    "type": "stdClass",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "mode",
                    "position": 1,
                    "type": "",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "run": {
            "name": "run",
            "summary": "Outputs the result.",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Mvc\\Output",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    if ( \\count((array)$this->obj) === 0 ){\n      self::statusHeader(404);\n    }\n\n    if ( $this->mode === 'cli' ){\n      if ( !headers_sent() && !$this->obj->content ){\n        exit('No output...');\n      }\n      if ( $this->obj->content ){\n        echo $this->obj->content;\n      }\n      exit();\n    }\n\n    if ( isset($this->obj->prescript) ){\n      if ( empty($this->obj->prescript) ){\n        unset($this->obj->prescript);\n      }\n      else if ( !BBN_IS_DEV ){\n        try{\n          $tmp = \\JShrink\\Minifier::minify($this->obj->prescript, ['flaggedComments' => false]);\n        }\n        catch ( \\RuntimeException $e ){\n          \\bbn\\X::log($this->obj->prescript, 'js_shrink');\n        }\n        if ( $tmp ){\n          $this->obj->prescript = $tmp;\n        }\n      }\n    }\n    if ( isset($this->obj->script) ){\n      if ( empty($this->obj->script) ){\n        unset($this->obj->script);\n      }\n      else if ( !BBN_IS_DEV ){\n        try{\n          $tmp = \\JShrink\\Minifier::minify($this->obj->script, ['flaggedComments' => false]);\n        }\n        catch ( \\RuntimeException $e ){\n          \\bbn\\X::log($this->obj->script, 'js_shrink');\n        }\n        if ( $tmp ){\n          $this->obj->script = $tmp;\n        }\n      }\n    }\n    if ( isset($this->obj->postscript) ){\n      if ( empty($this->obj->postscript) ){\n        unset($this->obj->postscript);\n      }\n      else if ( !BBN_IS_DEV ){\n        try{\n          $tmp = \\JShrink\\Minifier::minify($this->obj->postscript, ['flaggedComments' => false]);\n        }\n        catch ( \\RuntimeException $e ){\n          \\bbn\\X::log($this->obj->postscript, 'js_shrink');\n        }\n        if ( $tmp ){\n          $this->obj->postscript = $tmp;\n        }\n      }\n    }\n    if ( empty($this->obj->content) || ( ($this->mode === 'file') || ($this->mode === 'image') ) ){\n      if (!empty($this->obj->file)){\n        if (\\is_string($this->obj->file) && is_file($this->obj->file)){\n          $this->obj->file = new bbn\\File($this->obj->file);\n        }\n        if (\\is_object($this->obj->file) &&\n          method_exists($this->obj->file, 'download') &&\n          method_exists($this->obj->file, 'test') &&\n          $this->obj->file->test()\n        ){\n          $this->mode = 'file';\n        }\n      }\n      else if (!empty($this->obj->img)){\n        if (\\is_string($this->obj->img) && is_file($this->obj->img)){\n          $this->obj->img = new bbn\\File\\Image($this->obj->img);\n        }\n        if (\\is_object($this->obj->img) &&\n          method_exists($this->obj->img, 'display') &&\n          method_exists($this->obj->img, 'test') &&\n          $this->obj->img->test()\n        ){\n          $this->mode = 'image';\n        }\n      }\n    }\n    switch ( $this->mode ){\n      case 'public':\n      case 'json':\n      case 'js':\n      case 'css':\n      case 'doc':\n      case 'html':\n        if ( !ob_start(\"ob_gzhandler\" ) ){\n          ob_start();\n        }\n        else{\n          header('Content-Encoding: gzip');\n        }\n        break;\n      default:\n        ob_start();\n    }\n    if ( (empty($this->obj->content) && empty($this->obj->file) && empty($this->obj->img) && ($this->mode !==\n          'public')) ||\n      (($this->mode === 'public') && empty($this->obj)) ){\n      $this->mode = '';\n    }\n    else if ( !empty($this->obj->content) && !empty($this->obj->help) ){\n      $mdParser = new \\Parsedown();\n      $this->obj->help = $mdParser->text($this->obj->help);\n    }\n    switch ( $this->mode ){\n\n      case 'public':\n        header('Content-type: application\/json; charset=utf-8');\n        if (BBN_IS_DEV) {\n          echo json_encode($this->obj, JSON_PRETTY_PRINT);\n        }\n        else {\n          echo json_encode($this->obj);\n        }\n        break;\n\n      case 'js':\n        header('Content-type: application\/javascript; charset=utf-8');\n        echo $this->obj->content;\n        break;\n\n      case 'css':\n        header('Content-type: text\/css; charset=utf-8');\n        echo $this->obj->content;\n        break;\n\n      case 'text':\n        header('Content-type: text\/plain; charset=utf-8');\n        echo $this->obj->content;\n        break;\n\n      case 'xml':\n        header('Content-type: text\/xml; charset=utf-8');\n        echo $this->obj->content;\n        break;\n\n      case 'image':\n        if ( isset($this->obj->img) && \\is_object($this->obj->img) ){\n          $this->obj->img->display();\n        }\n        else{\n          $this->log(\"Impossible to display the following image: \".$this->obj->img->name);\n          self::statusHeader(404);\n        }\n        break;\n\n      case 'file':\n        if ( isset($this->obj->file) && \\is_object($this->obj->file) && method_exists($this->obj->file, 'download') ){\n          $this->obj->file->download();\n        }\n        else{\n          $this->log(\"Impossible to display the following controller\", $this);\n          self::statusHeader(404);\n        }\n        break;\n\n      default:\n        header('Content-type: text\/html; charset=utf-8');\n        echo isset($this->obj->content) ? $this->obj->content : '';\n\n    }\n  }",
            "startLine": 96,
            "endLine": 269,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": false,
            "arguments": []
        },
        "test": {
            "name": "test",
            "summary": "Checks whether the error property has been set (so an error happened).",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    if ($this->error) {\n      return false;\n    }\n\n    return true;\n  }",
            "startLine": 51,
            "endLine": 58,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": {
                "name": "test",
                "summary": "Checks whether the error property has been set (so an error happened).",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function()\n  {\n    if ($this->error) {\n      return false;\n    }\n\n    return true;\n  }",
                "startLine": 51,
                "endLine": 58,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 0,
                "numberOfRequiredParameters": 0,
                "returns": null,
                "parent": false,
                "arguments": []
            },
            "arguments": []
        },
        "check": {
            "name": "check",
            "summary": "Checks whether the error property has been set (so an error happened).",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    if ($this->error) {\n      return false;\n    }\n\n    return true;\n  }",
            "startLine": 65,
            "endLine": 72,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": {
                "name": "check",
                "summary": "Checks whether the error property has been set (so an error happened).",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function()\n  {\n    if ($this->error) {\n      return false;\n    }\n\n    return true;\n  }",
                "startLine": 65,
                "endLine": 72,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 0,
                "numberOfRequiredParameters": 0,
                "returns": null,
                "parent": false,
                "arguments": []
            },
            "arguments": []
        },
        "getError": {
            "name": "getError",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    return $this->error;\n  }",
            "startLine": 86,
            "endLine": 89,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": {
                "name": "getError",
                "summary": "",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function()\n  {\n    return $this->error;\n  }",
                "startLine": 86,
                "endLine": 89,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 0,
                "numberOfRequiredParameters": 0,
                "returns": null,
                "parent": false,
                "arguments": []
            },
            "arguments": []
        },
        "getErrors": {
            "name": "getErrors",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n\n  }",
            "startLine": 92,
            "endLine": 95,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": {
                "name": "getErrors",
                "summary": "",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function()\n  {\n\n  }",
                "startLine": 92,
                "endLine": 95,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 0,
                "numberOfRequiredParameters": 0,
                "returns": null,
                "parent": false,
                "arguments": []
            },
            "arguments": []
        },
        "log": {
            "name": "log",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    if ($this->isDebug()) {\n        $ar = \\func_get_args();\n        $cn = bbn\\Str::encodeFilename(str_replace('\\\\', '_', \\get_class($this)));\n      foreach ($ar as $a){\n            X::log($a, $cn);\n      }\n    }\n  }",
            "startLine": 98,
            "endLine": 107,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": {
                "name": "log",
                "summary": "",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function()\n  {\n    if ($this->isDebug()) {\n        $ar = \\func_get_args();\n        $cn = bbn\\Str::encodeFilename(str_replace('\\\\', '_', \\get_class($this)));\n      foreach ($ar as $a){\n            X::log($a, $cn);\n      }\n    }\n  }",
                "startLine": 98,
                "endLine": 107,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 0,
                "numberOfRequiredParameters": 0,
                "returns": null,
                "parent": false,
                "arguments": []
            },
            "arguments": []
        },
        "__call": {
            "name": "__call",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function($name, $arguments)\n  {\n    $class = \\get_class($this);\n    throw new \\Exception(\n      sprintf(\n        X::_(\"Wrong method used for the class %s: %s with the following arguments:\"),\n        $class,\n        $name,\n        implode(', ', $arguments)\n      )\n    );\n  }",
            "startLine": 115,
            "endLine": 126,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 2,
            "numberOfRequiredParameters": 2,
            "returns": null,
            "parent": {
                "name": "__call",
                "summary": "",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function($name, $arguments)\n  {\n    $class = \\get_class($this);\n    throw new \\Exception(\n      sprintf(\n        X::_(\"Wrong method used for the class %s: %s with the following arguments:\"),\n        $class,\n        $name,\n        implode(', ', $arguments)\n      )\n    );\n  }",
                "startLine": 115,
                "endLine": 126,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 2,
                "numberOfRequiredParameters": 2,
                "returns": null,
                "parent": false,
                "arguments": [
                    {
                        "name": "name",
                        "position": 0,
                        "type": "",
                        "required": true,
                        "has_default": false,
                        "default": "",
                        "default_name": ""
                    },
                    {
                        "name": "arguments",
                        "position": 1,
                        "type": "",
                        "required": true,
                        "has_default": false,
                        "default": "",
                        "default_name": ""
                    }
                ]
            },
            "arguments": [
                {
                    "name": "name",
                    "position": 0,
                    "type": "",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                },
                {
                    "name": "arguments",
                    "position": 1,
                    "type": "",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        },
        "isDebug": {
            "name": "isDebug",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function()\n  {\n    return $this->debug || (defined(\"BBN_IS_DEV\") && BBN_IS_DEV);\n  }",
            "startLine": 132,
            "endLine": 135,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 0,
            "numberOfRequiredParameters": 0,
            "returns": null,
            "parent": {
                "name": "isDebug",
                "summary": "",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function()\n  {\n    return $this->debug || (defined(\"BBN_IS_DEV\") && BBN_IS_DEV);\n  }",
                "startLine": 132,
                "endLine": 135,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 0,
                "numberOfRequiredParameters": 0,
                "returns": null,
                "parent": false,
                "arguments": []
            },
            "arguments": []
        },
        "setDebug": {
            "name": "setDebug",
            "summary": "",
            "description": "",
            "description_parts": [],
            "file": "bbn\\Models\\Cls\\Basic",
            "static": false,
            "visibility": "public",
            "final": false,
            "code": "function(bool $debug)\n  {\n    $this->debug = $debug;\n  }",
            "startLine": 142,
            "endLine": 145,
            "isDeprecated": false,
            "isGenerator": false,
            "isInternal": false,
            "isUserDefined": true,
            "isVariadic": false,
            "returnsReference": false,
            "numberOfParameters": 1,
            "numberOfRequiredParameters": 1,
            "returns": null,
            "parent": {
                "name": "setDebug",
                "summary": "",
                "description": "",
                "description_parts": [],
                "file": "bbn\\Models\\Cls\\Basic",
                "static": false,
                "visibility": "public",
                "final": false,
                "code": "function(bool $debug)\n  {\n    $this->debug = $debug;\n  }",
                "startLine": 142,
                "endLine": 145,
                "isDeprecated": false,
                "isGenerator": false,
                "isInternal": false,
                "isUserDefined": true,
                "isVariadic": false,
                "returnsReference": false,
                "numberOfParameters": 1,
                "numberOfRequiredParameters": 1,
                "returns": null,
                "parent": false,
                "arguments": [
                    {
                        "name": "debug",
                        "position": 0,
                        "type": "bool",
                        "required": true,
                        "has_default": false,
                        "default": "",
                        "default_name": ""
                    }
                ]
            },
            "arguments": [
                {
                    "name": "debug",
                    "position": 0,
                    "type": "bool",
                    "required": true,
                    "has_default": false,
                    "default": "",
                    "default_name": ""
                }
            ]
        }
    },
    "properties": null,
    "staticProperties": [],
    "constants": null,
    "summary": "",
    "description": "",
    "description_parts": []
}